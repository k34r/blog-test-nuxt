import{m as w,r as s,n as k,C,c as r,a as t,v as _,x as b,u as B,T as D,o as u,_ as I}from"./Bn0b61HB.js";import{u as T}from"./CymKluOc.js";const P={class:"container mx-auto p-4"},E={key:0,class:"text-center text-gray-500"},V={key:1,class:"p-4 border rounded-lg shadow-md"},M={key:2,class:"text-center text-red-500"},R=w({__name:"edit[post_id]",setup(S){const y=C(),v=B(),m=T(),e=s(null),i=s(!0),a=s(""),l=s(""),d=s(null),c=s(null);k(async()=>{i.value=!0;const n=y.params.post_id;e.value=await m.fetchPostById(n),e.value&&(a.value=e.value.title,l.value=e.value.description),i.value=!1});const x=()=>v.push("/"),g=()=>{a.value.length>12?d.value="Название не должно превышать 12 символов":d.value=null},f=()=>{l.value.length>50?c.value="Описание не должно превышать 50 символов":c.value=null},h=async()=>{if(g(),f(),!(d.value||c.value)&&e.value){const n={title:a.value.trim(),description:l.value.trim(),createdAt:D.fromDate(new Date)};await m.editPost(e.value.id,n),v.push("/")}};return(n,o)=>(u(),r("div",P,[t("button",{onClick:x,class:"bg-gray-500 text-white px-4 py-2 rounded-md mb-4 hover:bg-gray-600"}," Назад "),i.value?(u(),r("div",E,"Загрузка...")):e.value?(u(),r("div",V,[o[2]||(o[2]=t("h1",{class:"text-2xl font-bold mb-2"},"Редактировать пост",-1)),_(t("input",{"onUpdate:modelValue":o[0]||(o[0]=p=>a.value=p),onInput:g,class:"text-2xl font-bold mb-2 border p-2 w-full"},null,544),[[b,a.value]]),_(t("textarea",{"onUpdate:modelValue":o[1]||(o[1]=p=>l.value=p),onInput:f,class:"text-gray-600 border p-2 w-full"},null,544),[[b,l.value]]),t("div",{class:"flex gap-4 mt-4"},[t("button",{onClick:h,class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600"}," Сохранить "),t("button",{onClick:x,class:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600"}," Отмена ")])])):(u(),r("div",M,"Пост не найден"))]))}}),N=I(R,[["__scopeId","data-v-aadaa191"]]);export{N as default};
